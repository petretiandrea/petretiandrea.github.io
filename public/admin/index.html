<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>Content Manager</title>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  <script>
    // Register custom preview template using React
    const BlogPreview = ({ entry, widgetFor }) => {
      const data = entry.get('data').toJS();
      const body = widgetFor('body');

      return React.createElement('div', { className: 'blog-preview-container' }, [
        React.createElement('h1', { className: 'blog-preview-title', key: 'title' },
          data.title || 'Untitled'
        ),

        data.description && React.createElement('p', { className: 'blog-preview-description', key: 'desc' },
          data.description
        ),

        React.createElement('div', { className: 'blog-preview-meta', key: 'meta' }, [
          React.createElement('span', { key: 'author' }, data.author || 'Andrea Petreti'),
          React.createElement('span', { key: 'sep' }, 'Â·'),
          React.createElement('time', { key: 'date' },
            data.date ? new Date(data.date).toLocaleDateString('en', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            }) : 'No date'
          )
        ]),

        data.tags && data.tags.length > 0 && React.createElement('div', { className: 'blog-preview-tags', key: 'tags' },
          data.tags.map((tag, i) =>
            React.createElement('span', { className: 'blog-preview-tag', key: i }, tag)
          )
        ),

        data.image && React.createElement('img', {
          className: 'blog-preview-image',
          src: data.image,
          alt: data.title,
          key: 'image'
        }),

        React.createElement('div', { className: 'blog-preview-content', key: 'content' }, body)
      ].filter(Boolean));
    };

    CMS.registerPreviewTemplate('blog', BlogPreview);
  </script>
</body>
</html>
